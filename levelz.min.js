!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Block",{enumerable:!0,get:function(){return _block.default}}),Object.defineProperty(exports,"Coordinate",{enumerable:!0,get:function(){return _coordinate.default}}),Object.defineProperty(exports,"Coordinate2D",{enumerable:!0,get:function(){return _coordinate.default}}),Object.defineProperty(exports,"Coordinate3D",{enumerable:!0,get:function(){return _coordinate.default}}),Object.defineProperty(exports,"Dimension",{enumerable:!0,get:function(){return _coordinate.default}}),Object.defineProperty(exports,"Level",{enumerable:!0,get:function(){return _level.default}}),Object.defineProperty(exports,"Level2D",{enumerable:!0,get:function(){return _level.default}}),Object.defineProperty(exports,"Level3D",{enumerable:!0,get:function(){return _level.default}}),Object.defineProperty(exports,"LevelBuilder",{enumerable:!0,get:function(){return _builder.default}}),Object.defineProperty(exports,"LevelObject",{enumerable:!0,get:function(){return _block.default}}),Object.defineProperty(exports,"Scroll",{enumerable:!0,get:function(){return _level.default}}),Object.defineProperty(exports,"parseLevel",{enumerable:!0,get:function(){return _parser.default}});var _coordinate=_interopRequireDefault(require("./src/coordinate.js")),_block=_interopRequireDefault(require("./src/block.js")),_level=_interopRequireDefault(require("./src/level.js")),_builder=_interopRequireDefault(require("./src/builder.js")),_parser=_interopRequireDefault(require("./src/parser.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},{"./src/block.js":2,"./src/builder.js":3,"./src/coordinate.js":4,"./src/level.js":5,"./src/parser.js":6}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LevelObject=exports.Block=void 0;var _coordinate=require("./coordinate.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _slicedToArray(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=function(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}var Block=exports.Block=function(){return _createClass((function Block(name,properties){var _this=this;if(_classCallCheck(this,Block),_defineProperty(this,"name",void 0),_defineProperty(this,"properties",new Map),this.name=name,properties)if(properties instanceof Map)properties.forEach((function(value,key){_this.properties.set(key,value)}));else for(var _i=0,_Object$entries=Object.entries(properties);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];this.properties.set(key,value)}}),[{key:"toString",value:function(){var str="".concat(this.name);if(0==this.properties.size)return str;str+="<";var _step,_iterator=function(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function(){};return{s:F,n:function(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return a=r.done,r},e:function(r){u=!0,o=r},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}(this.properties);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];str+="".concat(key,"=").concat(value,", ")}}catch(err){_iterator.e(err)}finally{_iterator.f()}return(str=str.slice(0,-2))+">"}}])}();exports.LevelObject=function(){return _createClass((function LevelObject(block,coordinate){if(_classCallCheck(this,LevelObject),_defineProperty(this,"block",void 0),_defineProperty(this,"coordinate",void 0),coordinate instanceof Array&&(2==coordinate.length?coordinate=new _coordinate.Coordinate2D(coordinate[0],coordinate[1]):3==coordinate.length&&(coordinate=new _coordinate.Coordinate3D(coordinate[0],coordinate[1],coordinate[2]))),"string"==typeof block&&(block=new Block(block)),!(block instanceof Block&&coordinate instanceof _coordinate.Coordinate))throw new SyntaxError("Invalid input");this.block=block,this.coordinate=coordinate}),[{key:"name",get:function(){return this.block.name}},{key:"properties",get:function(){return this.block.properties}},{key:"toString",value:function(){return"".concat(this.block.toString(),": ").concat(this.coordinate.toString())}}])}()},{"./coordinate.js":4}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LevelBuilder=void 0;var _block2=require("./block.js"),_coordinate=require("./coordinate.js"),_level=require("./level.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=function(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}exports.LevelBuilder=function(){function LevelBuilder(dimension){if(function(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}(this,LevelBuilder),_defineProperty(this,"dimension",void 0),_defineProperty(this,"headers",new Map),_defineProperty(this,"blocks",new Set),2!==dimension&&3!==dimension)throw new SyntaxError("Invalid dimension; must be 2 or 3");this.dimension=dimension}return e=LevelBuilder,t=[{key:"create2D",value:function(){return new LevelBuilder(_coordinate.Dimension.TWO)}},{key:"create3D",value:function(){return new LevelBuilder(_coordinate.Dimension.THREE)}}],(r=[{key:"spawn",set:function(coordinate){if(coordinate instanceof Array){if(coordinate.length!==this.dimension)throw new SyntaxError("Invalid coordinate; must be ".concat(this.dimension,"D"));return 2===this.dimension&&this.headers.set("spawn",new _coordinate.Coordinate2D(coordinate[0],coordinate[1])),void(3===this.dimension&&this.headers.set("spawn",new _coordinate.Coordinate3D(coordinate[0],coordinate[1],coordinate[2])))}if(2==this.dimension&&!(coordinate instanceof _coordinate.Coordinate2D))throw new SyntaxError("Invalid coordinate; must be 2D");if(3==this.dimension&&!(coordinate instanceof _coordinate.Coordinate3D))throw new SyntaxError("Invalid coordinate; must be 3D");this.headers.set("spawn",coordinate)}},{key:"header",value:function(key,value){this.headers.set(key,value)}},{key:"block",value:function(name,coordinate,properties){this.block(new _block2.LevelObject(new _block2.Block(name,properties),coordinate))}},{key:"build",value:function(){if(2===this.dimension)return new _level.Level2D(this.headers,this.blocks);if(3===this.dimension)return new _level.Level3D(this.headers,this.blocks);throw new SyntaxError("Invalid dimension; must be 2 or 3")}}])&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,t}()},{"./block.js":2,"./coordinate.js":4,"./level.js":5}],4:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _callSuper(t,o,e){return o=_getPrototypeOf(o),function(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(t){var i=function(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dimension=exports.Coordinate3D=exports.Coordinate2D=exports.Coordinate=void 0;var Dimension=exports.Dimension={TWO:2,THREE:3},Coordinate=exports.Coordinate=function(){return _createClass((function Coordinate(){if(_classCallCheck(this,Coordinate),(this instanceof Coordinate?this.constructor:void 0)===Coordinate)throw new TypeError("Cannot instantiate abstract class")}),[{key:"magnitude",get:function(){throw new Error("Abstract method")}},{key:"dimension",get:function(){throw new Error("Abstract method")}}])}();exports.Coordinate2D=function(_Coordinate){function Coordinate2D(x,y){var _this;if(_classCallCheck(this,Coordinate2D),_defineProperty(_this=_callSuper(this,Coordinate2D),"x",void 0),_defineProperty(_this,"y",void 0),"number"!=typeof x||"number"!=typeof y)throw new SyntaxError("Invalid input");return _this.x=x,_this.y=y,_this}return _inherits(Coordinate2D,_Coordinate),_createClass(Coordinate2D,[{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"dimension",get:function(){return Dimension.TWO}},{key:"toString",value:function(){return"[".concat(this.x,", ").concat(this.y,"]")}}],[{key:"zero",get:function(){return new Coordinate2D(0,0)}},{key:"fromString",value:function(str){if(!str||"string"!=typeof str)throw new SyntaxError("Invalid input");if(!str.startsWith("[")||!str.endsWith("]"))throw new SyntaxError("Invalid input");var values=str.substring(1,str.length-1).split(",");if(2!==values.length)throw new SyntaxError("Invalid input: 2 values expected");return new Coordinate2D(Number(values[0].trim()),Number(values[1].trim()))}}])}(Coordinate),exports.Coordinate3D=function(_Coordinate2){function Coordinate3D(x,y,z){var _this2;if(_classCallCheck(this,Coordinate3D),_defineProperty(_this2=_callSuper(this,Coordinate3D),"x",void 0),_defineProperty(_this2,"y",void 0),_defineProperty(_this2,"z",void 0),"number"!=typeof x||"number"!=typeof y||"number"!=typeof z)throw new SyntaxError("Invalid input");return _this2.x=x,_this2.y=y,_this2.z=z,_this2}return _inherits(Coordinate3D,_Coordinate2),_createClass(Coordinate3D,[{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"dimension",get:function(){return Dimension.THREE}},{key:"toString",value:function(){return"[".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}}],[{key:"zero",get:function(){return new Coordinate3D(0,0,0)}},{key:"fromString",value:function(str){if(!str||"string"!=typeof str)throw new SyntaxError("Invalid input");if(!str.startsWith("[")||!str.endsWith("]"))throw new SyntaxError("Invalid input");var values=str.substring(1,str.length-1).split(",");if(3!==values.length)throw new SyntaxError("Invalid input: 3 values expected");return new Coordinate3D(Number(values[0].trim()),Number(values[1].trim()),Number(values[2].trim()))}}])}(Coordinate)},{}],5:[function(require,module,exports){"use strict";function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scroll=exports.Level3D=exports.Level2D=exports.Level=void 0;require("./block.js");var _coordinate=require("./coordinate.js");function _callSuper(t,o,e){return o=_getPrototypeOf(o),function(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var p=function(t,o){for(;!{}.hasOwnProperty.call(t,o)&&null!==(t=_getPrototypeOf(t)););return t}(e,t);if(p){var n=Object.getOwnPropertyDescriptor(p,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},_get.apply(null,arguments)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _slicedToArray(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function(){};return{s:F,n:function(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return a=r.done,r},e:function(r){u=!0,o=r},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=function(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}function _classPrivateFieldInitSpec(e,t,a){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,a)}function _classPrivateFieldGet(s,a){return s.get(_assertClassBrand(s,a))}function _assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var _dimension=new WeakMap,Level=exports.Level=function(){return _createClass((function Level(dimension){if(_classCallCheck(this,Level),_classPrivateFieldInitSpec(this,_dimension,void 0),_defineProperty(this,"headers",new Map),_defineProperty(this,"blocks",new Set),(this instanceof Level?this.constructor:void 0)===Level)throw new TypeError("Cannot instantiate abstract class");var s,a,r;a=this,r=dimension,(s=_dimension).set(_assertClassBrand(s,a),r)}),[{key:"dimension",get:function(){return _classPrivateFieldGet(_dimension,this)}},{key:"spawn",get:function(){return this.headers.get("spawn")}},{key:"coordinates",get:function(){return Array.from(this.blocks).map((function(block){return block.coordinate}))}},{key:"rawBlocks",get:function(){return Array.from(this.blocks).map((function(block){return block.block}))}},{key:"toString",value:function(){var _step,str="@type ".concat(_classPrivateFieldGet(_dimension,this)),_iterator=_createForOfIteratorHelper(this.headers);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];str+="\n@".concat(key," ").concat(value)}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(0!==this.blocks.size){str+="\n---";var _step2,_iterator2=_createForOfIteratorHelper(this.blocks);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var block=_step2.value;str+="\n".concat(block)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}str+="\nend"}return str}}])}(),Scroll=(exports.Level2D=function(_Level2){function Level2D(headers,blocks){var _this;if(_classCallCheck(this,Level2D),_this=_callSuper(this,Level2D,[_coordinate.Dimension.TWO]),headers)if(headers instanceof Map)headers.forEach((function(value,key){_this.headers.set(key,value)}));else for(var _i=0,_Object$entries=Object.entries(headers);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];_this.headers.set(key,value)}return blocks&&(blocks instanceof Set?_this.blocks=blocks:_this.blocks=new Set(blocks)),_this}return _inherits(Level2D,_Level2),_createClass(Level2D,[{key:"scroll",get:function(){return this.headers.get("scroll")},set:function(value){if(value!==Scroll.NONE&&value!==Scroll.HORIZONTAL_LEFT&&value!==Scroll.HORIZONTAL_RIGHT&&value!==Scroll.VERTICAL_UP&&value!==Scroll.VERTICAL_DOWN)throw new SyntaxError("Invalid scroll direction");this.headers.set("scroll",value)}},{key:"spawn",get:function(){return _get(_getPrototypeOf(Level2D.prototype),"spawn",this)},set:function(coordinate){if(coordinate instanceof Array){if(2!==coordinate.length)throw new SyntaxError("Invalid coordinate; must be 2D");this.headers.set("spawn",new _coordinate.Coordinate2D(coordinate[0],coordinate[1]))}else{if(!(coordinate instanceof _coordinate.Coordinate2D))throw new SyntaxError("Invalid coordinate; must be 2D");this.headers.set("spawn",coordinate)}}}])}(Level),exports.Scroll={NONE:"none",HORIZONTAL_LEFT:"horizontal-left",HORIZONTAL_RIGHT:"horizontal-right",VERTICAL_UP:"vertical-up",VERTICAL_DOWN:"vertical-down"});exports.Level3D=function(_Level3){function Level3D(headers,blocks){var _this2;if(_classCallCheck(this,Level3D),_this2=_callSuper(this,Level3D,[_coordinate.Dimension.THREE]),headers)if(headers instanceof Map)headers.forEach((function(value,key){_this2.headers.set(key,value)}));else for(var _i2=0,_Object$entries2=Object.entries(headers);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],value=_Object$entries2$_i[1];_this2.headers.set(key,value)}return blocks&&(blocks instanceof Set?_this2.blocks=blocks:_this2.blocks=new Set(blocks)),_this2}return _inherits(Level3D,_Level3),_createClass(Level3D,[{key:"spawn",get:function(){return _get(_getPrototypeOf(Level3D.prototype),"spawn",this)},set:function(coordinate){if(coordinate instanceof Array){if(3!==coordinate.length)throw new SyntaxError("Invalid coordinate; must be 3D");this.headers.set("spawn",new _coordinate.Coordinate3D(coordinate[0],coordinate[1],coordinate[2]))}else{if(!(coordinate instanceof _coordinate.Coordinate3D))throw new SyntaxError("Invalid coordinate; must be 3D");this.headers.set("spawn",coordinate)}}}])}(Level)},{"./block.js":2,"./coordinate.js":4}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseLevel=function(level){var _split2=_slicedToArray(split(level),2),headers0=_split2[0],blocks0=_split2[1],headers=readHeaders(headers0),is2D=2==headers.get("type"),spawn=headers.get("spawn");spawn&&"default"!==spawn||headers.set("spawn",is2D?"[0, 0]":"[0, 0, 0]");headers.get("scroll")||headers.set("scroll","none");var _step,blocks=new Set,_iterator=_createForOfIteratorHelper(blocks0);try{for(_iterator.s();!(_step=_iterator.n()).done;){var line=_step.value;if("end"===line)break;var _readLine2=_slicedToArray(readLine(line,!is2D),2),block=_readLine2[0],points=_readLine2[1];if(block&&points){var _step2,_iterator2=_createForOfIteratorHelper(points);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var point=_step2.value;blocks.add(new _block.LevelObject(block,point))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return is2D?new _level.Level2D(headers,blocks):new _level.Level3D(headers,blocks)},exports.read2DPoints=read2DPoints,exports.read3DPoints=read3DPoints,exports.readBlock=readBlock,exports.readHeaders=readHeaders,exports.readLine=readLine,exports.readRawBlock=readRawBlock,exports.roll=roll,exports.split=split;var _coordinate=require("./coordinate.js"),_block=require("./block.js"),_level=require("./level.js");function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function(){};return{s:F,n:function(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return a=r.done,r},e:function(r){u=!0,o=r},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _slicedToArray(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function split(level){var _level$split2=_slicedToArray(level.split("\n---"),2),headers=_level$split2[0],blocks=_level$split2[1];return[headers.split("\n"),blocks.split("\n")]}function roll(map){var t,sum=Array.from(map.values()).reduce((function(a,b){return a+b}),0);if(sum<1)throw new SyntaxError("Invalid Probabilities: ".concat(sum));var _step3,r=Math.random(),cumulative=0,_iterator3=_createForOfIteratorHelper(map);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _step3$value=_slicedToArray(_step3.value,2),key=_step3$value[0];if(r<(cumulative+=_step3$value[1])/sum){t=key;break}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return t}function readHeaders(headers){var _step4,map=new Map,_iterator4=_createForOfIteratorHelper(headers);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var s=_step4.value;if(!s.startsWith("@"))throw new SyntaxError("'Invalid header; does not stard with @: ".concat(s));var _s$split2=_slicedToArray(s.split(/\s([\s\S]*)/),2),key=_s$split2[0],value=_s$split2[1];map.set(key.slice(1),value)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}if(!map.has("type"))throw new SyntaxError("Missing @type header");if("2"!=map.get("type")&&"3"!=map.get("type"))throw new SyntaxError("Invalid @type header");if(!map.has("spawn"))throw new SyntaxError("Missing @spawn header");return map}function read2DPoints(input){var _step5,points=new Set,_iterator5=_createForOfIteratorHelper(input.split(/\*/));try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var s0=_step5.value,s=s0.trim();if(!s)return;if(s.startsWith("(")&&s.endsWith("]")){var _split3=s.split(/\^/),coords=_split3[1].replace(/[\[\]\s]/g,"").split(/,/),matrix=_split3[0].replace(/[()\s]/g,"").split(/,/);if(2!==coords.length)throw new SyntaxError("Invalid 2D point: ".concat(s0));if(4!==matrix.length)throw new SyntaxError("Invalid 2D matrix: ".concat(s0));for(var cx=parseFloat(coords[0]),cy=parseFloat(coords[1]),x1=parseInt(matrix[0]),x2=parseInt(matrix[1]),y1=parseInt(matrix[2]),y2=parseInt(matrix[3]),x=x1;x<=x2;x++)for(var y=y1;y<=y2;y++)points.add(new _coordinate.Coordinate2D(cx+x,cy+y))}else points.add(_coordinate.Coordinate2D.fromString(s))}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}return points}function read3DPoints(input){var _step6,points=new Set,_iterator6=_createForOfIteratorHelper(input.split(/\*/));try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var s0=_step6.value,s=s0.trim();if(!s)return;if(s.startsWith("(")&&s.endsWith("]")){var _split4=s.split(/\^/),coords=_split4[1].replace(/[\[\]\s]/g,"").split(/,/),matrix=_split4[0].replace(/[()\s]/g,"").split(/,/);if(3!==coords.length)throw new SyntaxError("Invalid 2D point: ".concat(s0));if(6!==matrix.length)throw new SyntaxError("Invalid 2D matrix: ".concat(s0));for(var cx=parseFloat(coords[0]),cy=parseFloat(coords[1]),cz=parseFloat(coords[2]),x1=parseInt(matrix[0]),x2=parseInt(matrix[1]),y1=parseInt(matrix[2]),y2=parseInt(matrix[3]),z1=parseInt(matrix[4]),z2=parseInt(matrix[5]),x=x1;x<=x2;x++)for(var y=y1;y<=y2;y++)for(var z=z1;z<=z2;z++)points.add(new _coordinate.Coordinate3D(cx+x,cy+y,cz+z))}else points.add(_coordinate.Coordinate3D.fromString(s))}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}return points}function readLine(input){var threeD=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!input)return[];var split=input.replace(/\s/g,"").split(/:/),block=readBlock(split[0]);return block?[block,threeD?read3DPoints(split[1]):read2DPoints(split[1])]:[]}function readBlock(line){if(line.startsWith("{")&&line.endsWith("}")){var blocks,block0=line.replace(/[{}]/g,"");if(line.includes(">,")){blocks=block0.split(/>,/g);for(var i=0;i<blocks.length;i++)blocks[i].includes("<")&&(blocks[i]="".concat(blocks[i],">"))}else blocks=block0.split(/,/g);var _step7,l=blocks.length,blockToChance=new Map,_iterator7=_createForOfIteratorHelper(blocks);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var _s$split4=_slicedToArray(_step7.value.split(/=/,2),2),block=_s$split4[0],chance=_s$split4[1],v=parseFloat(chance);v?blockToChance.set(readRawBlock(block),v):blockToChance.set(readRawBlock(block),1/l)}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}return roll(blockToChance)}return readRawBlock(line)}function readRawBlock(input){if(!input)return null;var split=input.replace(/[\s\>]/,"").split(/\</),name=split[0].trim();if(split.length<2)return new _block.Block(name);var _step8,properties=new Map,_iterator8=_createForOfIteratorHelper(split[1].split(/,/));try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _s$split6=_slicedToArray(_step8.value.split(/=/),2),key=_s$split6[0],value=_s$split6[1];properties.set(key,value)}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}return new _block.Block(name,properties)}},{"./block.js":2,"./coordinate.js":4,"./level.js":5}]},{},[1]);